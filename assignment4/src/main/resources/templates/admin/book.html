<html lang="en" xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

<head>
  <meta charset="utf-8">

  <title>Books management</title>

  <!-- Bootstrap CSS -->
  <link href="/resources/css/bootstrap.min.css" rel="stylesheet">
  <!-- bootstrap theme -->
  <link href="/resources/css/bootstrap-theme.css" rel="stylesheet">
  <!--external css-->
  <!-- font icon -->
  <link href="/resources/css/elegant-icons-style.css" rel="stylesheet" />
  <link href="/resources/css/font-awesome.min.css" rel="stylesheet" />
  <!-- Custom styles -->
  <link href="/resources/css/style.css" rel="stylesheet">
  <link href="/resources/css/style-responsive.css" rel="stylesheet" />
<style>
.modal{
    z-index:10;
    left: 0;
    top: 0;
    width: 100%; 
    height: 100%; 
    overflow: auto; 
    padding-top: 60px;
    background-color: rgb(0,0,0); 
    background-color: rgba(0,0,0,0.8); 
 }
 .modal-content {
    background-color: #fefefe;
    margin: auto auto  auto 30%;
    width: 50%;
    padding-right: 2%;
    padding-left: 2%;
    border-radius: 10px;
}
.hidden {
   display:none;
}
</style>


</head>

<body>
<input id="checkUser" type="hidden" sec:authorize="hasRole('ROLE_USER')" value="isUser"/>
  <!-- container section start -->
  <section id="container" class="">
    <!--header start-->
    <header class="header dark-bg">
      <div class="toggle-nav">
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"><i class="icon_menu"></i></div>
      </div>

      <!--logo start-->
      <a href="/" class="logo">Books <span class="lite"> Management</span></a>
      <!--logo end-->

      <div class="nav search-row" id="top_menu">
        <!--  search form start -->
        <ul class="nav top-menu">
          <li>
            <form class="navbar-form">
              <input class="form-control" placeholder="Search" type="text">
            </form>
          </li>
        </ul>
        <!--  search form end -->
      </div>

      <div class="top-nav notification-row">
        <!-- notificatoin dropdown start-->
        <ul class="nav pull-right top-menu">
		  <li class="dropdown" sec:authorize="isAnonymous()">
            <a class="" href="#" onclick="document.getElementById('viewFormSignUp').style.display='block'"><i class="icon_pencil-edit"></i> Sign up
            </a>
          </li>
          <li  class="dropdown" sec:authorize="isAnonymous()">
            <a href="/show-login"><i class="icon_lock_alt" ></i> Sign in
            </a>
          </li>
          <!-- user login dropdown start-->
          <li class="dropdown" sec:authorize="hasAnyRole('ROLE_USER','ROLE_ADMIN')">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="profile-ava">
                                <img alt="" src="/resources/img/avatar1_small.jpg">
                            </span>
                            <span sec:authentication="name" class="username"></span>
                            <b class="caret"></b>
                        </a>
            <ul class="dropdown-menu extended logout">
              <!-- <div class="log-arrow-up"></div> -->
               <li class="eborder-top">
                <a href="#" onclick="showEditUserLogin()"><i class="icon_profile"></i>MY PROFILE</a>
              </li>
              <li>
                <a href="#"><i class="icon_key_alt"></i>CHANGE PASSWORD</a>
              </li>
              <li>
                <a href="/logout"><i class="icon_lock-open_alt"></i>Log Out</a>
              </li>
            </ul>
          </li>
          <!-- user login dropdown end -->
        </ul>
        <!-- notificatoin dropdown end-->
      </div>
    </header>
    <!--header end-->

    <!--sidebar start-->
    <aside sec:authorize="hasAnyRole('ROLE_USER','ROLE_ADMIN')">
      <div id="sidebar" class="nav-collapse ">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu">
          <li class="" sec:authorize="hasAnyRole('ROLE_ADMIN')">
            <a class="" href="/admin/allUser">
                          <i class="fa fa-users"></i>
                          <span>Users</span>
            </a>
          </li>
          <li class="sub-menu">
            <a href="javascript:;" class="">
                          <i class="icon_documents_alt"></i>
                          <span>Book</span>
                          <span class="menu-arrow arrow_carrot-right"></span>
                      </a>
            <ul class="sub">
              <li><a class="" href="/myBook">My Book</a></li>
              <li><a class="" href="/"><span>All Book</span></a></li>
            </ul>
          </li>
          
          <li class="">
            <a class="" href="/comment">
                          <i class="icon_comment_alt"></i>
                          <span>Comment</span>
            </a>
          </li>

        </ul>
        <!-- sidebar menu end-->
      </div>
    </aside>

    <!--main content start-->
    <section id="main-content">
      <section class="wrapper">
       <div class="row">
          <div class="col-lg-12">
            <h3 class="page-header"><i class="fa fa-book"></i>Books management</h3>
            <ol class="breadcrumb" sec:authorize="hasAnyRole('ROLE_USER','ROLE_ADMIN')">
              <li><i class="fa fa-home"></i><a href="/">Home</a></li>
              <li><i class="fa fa-book"></i>All book</li>
            </ol>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <section class="panel">
             <div id="msgResult" style="margin-left: 10px;color: blue; font-size: 20px; font-weight: bold;">  </div><br>
              <div id="result">
              <table class="table table-striped table-advance table-hover">
                <tbody>
                  <tr>
                    <th><i class=""></i>Title</th>
                    <th><i class=""></i>Author</th>
                    <th><i class=""></i>Date created</th>
                    <th><i class=""></i>Date updated</th>
                    <th sec:authorize="hasAnyRole('ROLE_ADMIN')"><i class=""></i>Status</th>
                    <th ><i class="" ></i> Action</th>
                  </tr>
                  <tr th:each="listBook : ${listBook}">
                    <td th:text="${listBook.title}">..</td>
                    <td th:utext="${listBook.author}"></td>
                    <td th:utext="${listBook.createdAt}"></td>
                    <td th:utext="${listBook.updatedAt}"></td>
                    <td sec:authorize="hasAnyRole('ROLE_ADMIN')">
                    	<input type="checkbox" th:checked="${listBook.enabled == 1}" th:onclick="'changeStatusBook('+${listBook.idBook}+','+${listBook.enabled}+')'">
                    </td>
                    <td>
                      <div class="btn-group">
                      	<a class="btn btn-warning" th:href="@{'/detailBook/' + ${listBook.idBook}}" title="Detail!"><i class="icon_camera_alt"></i></a>
                        <a sec:authorize="hasAnyRole('ROLE_ADMIN')" class="btn btn-success" th:onclick="'showEditBook(\''+${listBook.idBook}+'\')'" href="#" title="Edit!"><i class="icon_pencil-edit"></i></a>
                      	<a sec:authorize="hasAnyRole('ROLE_ADMIN')" class="btn btn-danger" th:onclick="' deleteBook(\''+${listBook.idBook}+'\')'" href="#" title="Delete!"><i class="icon_close_alt2"></i></a>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              </div>
            </section>
          </div>
        </div>
        <!-- page end-->
         
     <div class="row" id="page">
         <div class="form-group col-md-1">
            <select class="form-control pagination" id="pageSizeSelect">
                <option th:each="pageSize : ${pageSizes}" th:text="${pageSize}" th:value="${pageSize}"
                        th:selected="${pageSize} == ${selectedPageSize}"></option>
            </select>
        </div> 
        <div th:if="${listBook.totalPages != 1}" class="form-group col-md-11 pagination-centered">
            <ul class="pagination">
                <li th:class="${listBook.number == 0} ? disabled">
                    <a class="pageLink" href="#" 
                    th:onclick="'pageBook('+${selectedPageSize}+',1)'">&laquo;</a>         
                </li>
                <li th:class="${listBook.number == 0} ? disabled">
                    <a class="pageLink" 
                    th:onclick="'pageBook('+${selectedPageSize}+','+${listBook.number}+')'" href="#">&larr;</a>
                </li>
                <li th:class="${listBook.number == (page - 1)} ? 'active pointer-disabled'"
                    th:each="page : ${#numbers.sequence(pager.startPage, pager.endPage)}">
                    <a class="pageLink" href="#"
                       th:onclick = "'pageBook('+${selectedPageSize}+','+${page}+')'"
                       th:text="${page}"></a>
                </li>
                <li th:class="${listBook.number + 1 == listBook.totalPages} ? disabled">
                    <a class="pageLink" href="#"
                       th:onclick="'pageBook('+${selectedPageSize}+','+${listBook.number + 2}+')'">&rarr;</a>
                </li>
                <li th:class="${listBook.number + 1 == listBook.totalPages} ? disabled">
                    <a class="pageLink" href="#"
                    	th:onclick="'pageBook('+${selectedPageSize}+','+${listBook.totalPages}+')'">&raquo;</a>
                </li>
            </ul>
        </div>
    </div>
        
      </section>
    </section>
  </section>
  
  
    
     <div id="viewFormEditBook" class="modal text-center">
           <form class="modal-content animate" id="formEditBook"  name="formEditBook">
           <div class="">
						<button type="button" class="close" onclick="document.getElementById('viewFormEditBook').style.display='none'" >&times;</button>
			</div> 
           <br><h3>EDIT BOOK</h3><br>
        <table style=" width:100%"  class="">
         <tr>
          <td><input type="hidden" id="idBookEdit" name="idBookEdit" autocomplete="idBookEdit"></td>
          <td><br></td>
         </tr>
         <tr>
          <td><input type="hidden" id="idUserBookEdit" name="idUserBookEdit" autocomplete="idUserBookEdit"></td>
          <td><br></td>
         </tr>
        <tr>
          <td><label ><b>Title<span style="color: red">(*)</span></b></label></td>
          <td><input autofocus type="text" name="titleEdit" id="titleEdit" class="form-control" autocomplete="titleEdit"></td>
         </tr>
          <tr>
          <td><br></td>
          <td><br></td>
         </tr>
         <tr>
          <td><label><b>Author<span style="color: red">(*)</span></b></label></td>
          <td><input type="text" name="authorEdit" id="authorEdit" class="form-control" autocomplete="authorEdit"></td>
         </tr>
          <tr>
          <td><br></td>
          <td><br></td>
         </tr>
         <tr>
          <td><label><b>Description</b></label></td>
          <td>
          	<textarea style="margin: 0px; height: 200px;" name="descriptionEdit" cols="30" id="descriptionEdit" class="form-control"></textarea>
          </td>    
         </tr>
          <tr>
          <td><br></td>
          <td><br></td>
         </tr>
         <tr>
          <td></td>
          <td>
            <input type="submit" value="UPDATE" class="btn btn-primary">
            <input type="reset" value="CANCEL" class="btn btn-danger"
              onclick="document.getElementById('viewFormEditBook').style.display='none'">
          </td>
         </tr>
          <tr>
          <td><br></td>
          <td><br></td>
         </tr>
        </table>
       </form>
    </div>

<div id="viewFormSignUp" class="modal text-center">
    <form class="modal-content animate" id="formSignUp"  name="formSignUp">
        <div class="">
            <button type="button" class="close" onclick="document.getElementById('viewFormSignUp').style.display='none'" >&times;</button>
        </div>
        <br><h3>SIGN UP</h3><br>
        <table style=" width:100%"  class="">
            <tr id="check">
                <td><label><b>Email<span style="color: red">(*)</span></b></label></td>
                <td><input autofocus type="email" onblur="return checkEmail()" name="emailSignUp" id="email" class="form-control" autocomplete="email"></td>
            </tr>
            <tr>
                <td><br></td>
                <td><br></td>
            </tr>
            <tr>
                <td><label><b>Password<span style="color: red">(*)</span></b></label></td>
                <td><input type="password" name="passwordSignUp" id="passwordSignUp" class="form-control" autocomplete="password"></td>
            </tr>
            <tr>
                <td><br></td>
                <td><br></td>
            </tr>
            <tr>
                <td><label><b>Confirm password<span style="color: red">(*)</span></b></label></td>
                <td><input type="password" name="rePasswordSignUp" id="rePasswordSignUp" class="form-control" autocomplete="rePassword"></td>
            </tr>
            <tr>
                <td><br></td>
                <td><br></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <input type="submit" value="SIGN UP" class="btn btn-primary">
                    <input type="reset" value="CANCEL" class="btn btn-danger"
                           onclick="document.getElementById('viewFormSignUp').style.display='none'">
                </td>
            </tr>
            <tr>
                <td><br></td>
                <td><br></td>
            </tr>
        </table>
    </form>
</div>

    <div id="viewFormEditUserLogin" class="modal text-center" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')">
           <form class="modal-content animate" id="formEditUserLogin" name="formEditUserLogin">
           <div class="">
						<button type="button" class="close" onclick="document.getElementById('viewFormEditUserLogin').style.display='none'" >&times;</button>
			</div> 
           <br><h3>PERSONAL INFORMATION</h3><br>
          <!--  <p style="color: red">(*)Not be empty!</p> -->
        <table style=" width:100%"  class="">
        <tr>
          <td><input type="hidden" id="idUserEditLogin" name="idUserEditLogin"></td>
          <td><br></td>
         </tr>
         <tr>
          <td><label><b>Email</b></label></td>
          <td><input type="email" name="email" id="emailEditLogin" class="form-control" disabled="disabled" autocomplete="emailEdit"></td>
         </tr>
         <tr>
	          <td><br></td>
	          <td><br></td>
         </tr>
          <tr>
          <td><label ><b>Role</b></label></td>
          <td>
          	<select name="idRole" id="idRoleEditLogin" disabled="disabled">
          		<option value="2">User</option>
          		<option value="1">Admin</option>
          		
          	</select>
          </td>
         </tr>
         <tr>
	          <td><br></td>
	          <td><br></td>
         </tr>
        <tr>
          <td><label ><b>FirstName</b></label></td>
          <td><input autofocus type="text" name="firstName" id="firstNameEditLogin" class="form-control" autocomplete="firstName"></td>
         </tr>
         <tr>
	          <td><br></td>
	          <td><br></td>
         </tr>
         <tr>
          <td><label ><b>LastName</b></label></td>
          <td><input type="text" name="lastName" id="lastNameEditLogin" class="form-control" autocomplete="lastName"></td>
         </tr>
         <tr>
	          <td><br></td>
	          <td><br></td>
         </tr>
         <tr>
          <td></td>
          <td>
            <input type="submit" value="UPDATE" class="btn btn-primary">
            <input type="reset" value="CANCEL" class="btn btn-danger"
              onclick="document.getElementById('viewFormEditUserLogin').style.display='none'">
            
          </td>
         </tr>
          <tr>
          <td><br></td>
          <td><br></td>
         </tr>
        </table>
       </form>
    </div>
  
  <!-- container section end -->
  <!-- javascripts -->
  <script src="/resources/js/jquery.js"></script>
  <script src="/resources/js/jquery.validate.min.js" type="text/javascript"></script>
  <script src="/resources/js/bootstrap.min.js"></script>
  <!-- nicescroll -->
  <script src="/resources/js/jquery.scrollTo.min.js"></script>
  <script src="/resources/js/jquery.nicescroll.js" type="text/javascript"></script>
  <!--custome script for all page-->
  <script src="/resources/js/scripts.js"></script>
  
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.js"></script>
  <script src="/resources/js/validate.js" type="text/javascript"></script>
  <script src="/resources/js/JsonUser.js" type="text/javascript"></script>
  <script src="/resources/js/JsonBook.js" type="text/javascript"></script> 
  <script src="/resources/js/page.js" type="text/javascript"></script>   
</body>

</html>
